Встраивание двоичных данных в исполняемый файл (программу на C)

иногда нужно добавить данные в программу после компиляции. рассмотрим один из способов 

так как значимые для загрузки исполняемго (exe-)файла данные находятся в начале файла, то данные можно записать в конец ехе-шника. после этого файл (в многих системах) будет успешно загружаться и выполняться.
возникает проблема, как эти данные найти из самого кода программы. хоть они и внутри исполняемого файла, тем не менее, многим пользователям может быть затруднительно их найти (на 2019 год - мне тоже) разбором этого файла.

как решим? - создадим в программе переменную-строку определенного вида, которую можно будет найти редактором или скриптом:

@code char c[] = "\n mysizeis 000000 \n";

(полный исходник программы в data/embeddata1/main.c. это 8-ая строка)

после компиляции мы всегда сможем порыться (редактором) в ехе-файле и найти эту строку. в моём случае, это строка содержит размер программы до того, как в её хвост добавлены данные.
при запуске, программа прочитает эту измененную извне строку и поймёт, с какого места в хвосте её исполняемого файла лежат дописанные данные.

чтобы попробовать программу в работе, вам потребуется Unix-совместимая ОС. так же вам понадобится установленный в системе компилятор, make и Lua.
* перейдите в консоли/терминале в директорию `data/embeddata1`
* соберите проект командой `make`
* или можно сразу собрать и запустить командой `make run`
* программа отобразит содержимое `data.txt`
* можете отредактировать файл `data.txt`, перезапустить `make run` и убедиться, что уже новые данные встроены в программу.
@vspace yes

больше статей можно найти на канале в Telegram: <a href='https://t.me/assistpc'>https://t.me/assistpc</a>

